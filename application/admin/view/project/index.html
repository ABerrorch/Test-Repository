{include file="common/body_up"/}

	<div id="container" class="effect aside-float aside-bright mainnav-lg">
	{include file="common/navbar"/}
	<div class="boxed">

		<!--CONTENT CONTAINER-->
		<!--===================================================-->
		<div id="content-container">

			<!--Page Title-->
			<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
			<div id="page-title">

			</div>
			<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
			<!--End page title-->


			<!--Breadcrumb-->
			<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
			<ol class="breadcrumb">
				<li><a href="{:url('Admin/Index/index')}">首页</a></li>
				<li><a href="#">{$title|default="设置模板默认值"}</a></li>
				<li class="active">{$subtitle}</li>
			</ol>
			<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
			<!--End breadcrumb-->
			<!--<div class="alert alert-info" style="margin: 17px;">-->
			<!--<button class="close" data-dismiss="alert"><i class="pci-cross pci-circle"></i></button>-->
			<!--<h2><strong>注意!</strong>测试账号每个IP每分钟只能新增一篇文章，没有删除和编辑权限。</h2>-->
			<!--</div>-->
			<div class="col-sm-12">
				<div class="panel">
				<!-- <div class="panel-heading">
                    <h3 class="panel-title">Sample Toolbar</h3>
                </div> -->

				<!--Data Table-->
				<!--===================================================-->
				<div class="panel-heading">
					<h3 class="panel-title" style="vertical-align: center">
						项目列表
						<div style="float: right;margin: auto;padding: auto;">
							<!--注意了同志们！下面的这里不能直接使用链接！否则拥有预加载功能的浏览器会在鼠标移动上去的时候自动加载！-->
							<button class="btn btn-primary btn-default-basic" onclick="projectAddAdd()">
								添加空项目
							</button>
							<script>
								function projectAddAdd() {
									location = '/Admin/Project/project_add';
                                }
							</script>
						</div>
					</h3>
				</div>
				<div class="panel panel-info">
					<!--<div class="panel-heading" style="border-radius: 5px;margin: 17px;"><h3>我的文章</h3></div>-->
					<div class="panel-body">
						<table  class="table table-bordered table-hover">
							<thead>
							<tr>
								<th width="5%">ID</th>
								<th width="55%">项目名称</th>
								<th width="15%">负责人</th>
								<th width="15%">创建时间</th>
								<th width="5%"></th>
								<th width="5%"></th>
							</tr>
							</thead>
							<tbody>
							{volist name = "data" id = "vo" }
							<tr>
								<td>{$vo.id}</td>
								<td>
									<a type="button" class="btn btn-success btn-rounded"
									   href="{:url('Admin/Project/project_edit',['project_id'=>$vo.id])}">
										{$vo.name|default="未知"}
									</a>
								</td>
								<td>
									<?php
										// 这个地方是用来处理替换中文符号，并且能够实现在人数很多的时候自动换行
										// 因为浏览器会把连续的英文字符和逗号视为一个单词所以必须分开
										if(!empty($vo['principal'])){
											$tmp = preg_replace("/，/",", ",$vo['principal']);
											$tmp = preg_replace("/,/",", ",$tmp);
											echo $tmp;
										} else {
											echo "没有负责人";
										}
									?>
								</td>
								<td>{$vo.time}</td>
								<td>
									<a type="button" class="btn btn-success btn-block" href="{:url('Admin/Project/project_edit',['project_id'=>$vo.id])}">编辑</a>
								</td>
								<td>
									<a type="button" class="btn btn-danger  btn-block"
									   onclick="fileDeleteConfirm{$vo['id']}()">删除</a>
									<script>
                                        function fileDeleteConfirm{$vo['id']}() {
                                            if(confirm('确认删除这个资源？'))
                                                location="{:url('Admin/Project/project_del',['project_id'=>$vo['id']])}"
                                        }
									</script>
								</td>
							</tr>
							{/volist}
							</tbody>
						</table>
						<!--下面这个东西就是选择栏-->
						<!--我也不知道原理,反正如果从数据库里读取数据的时候使用pageinate得到的变量,就能用这个东西-->
						<!--查文档查不到原理,绝望-->
						{$data->render()}
					</div>
				</div>
				<!--===================================================-->
				<!--End Data Table-->

			</div>
			</div>
		</div>
		<!--===================================================-->
		<!--END CONTENT CONTAINER-->

		{include file="common/mainnav"/}
	</div>
	{include file="common/footer"/}
</div>

{include file="common/body_down"/}